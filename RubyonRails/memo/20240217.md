# CRUDをやる
## Postmanで確認

## 実際の書いたコード

## GET(`index`,`show`)
### `index`
```
http://localhost:3001/api/v1/location_posts
```

### `show`
```
# ex
http://localhost:3001/api/v1/location_posts/[:id]
# actual
http://localhost:3001/api/v1/location_posts/3
```

## POST(`create`,`update`)
### `Create`
```
http://localhost:3001/api/v1/location_posts
```
**上記に加え以下のようにbodyにJSONを加える必要があった**
<img width="1440" alt="スクリーンショット 2024-02-17 17 23 38" src="https://github.com/hrk-sgymm23/TIL/assets/78539910/d858dfae-2ea5-4de7-9552-adcf668b95db">

### `update`
```
http://localhost:3001/api/v1/location_posts/:id
```
　**上記に加え`params`に`key`:`[:id]`,`value`に対象のidを記載し、`body`にてJSON形式で更新したい値を指定する**
<img width="1440" alt="スクリーンショット 2024-02-17 18 18 20" src="https://github.com/hrk-sgymm23/TIL/assets/78539910/77caa091-46c3-49ef-8aff-a356aee62570">


### `update`うまくいかない
- "id"が:"id"になっている
```
ass-ass_api-1    | Started PUT "/api/v1/location_posts/:id" for 192.168.160.1 at 2024-02-17 08:57:53 +0000
ass-ass_api-1    | Processing by Api::V1::LocationPostsController#update as */*
ass-ass_api-1    |   Parameters: {"title"=>"スタバ竪町", "id"=>":id", "location_post"=>{"title"=>"スタバ竪町"}}
ass-ass_api-1    | Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 141)
ass-ass_api-1    |
ass-ass_api-1    |
ass-ass_api-1    |
ass-ass_api-1    | NoMethodError (undefined method `update' for nil:NilClass):
ass-ass_api-1    |
ass-ass_api-1    | app/controllers/api/v1/location_posts_controller.rb:22:in `update'
```

### 参照する値の処理を忘れていた
```Ruby
before_action :set_location_post, only: [:show, :update, :destroy]

private
  def set_location_post
    @location_post = LocationPost.find(params[:id])
  end
```
上記を追加し単一参照系メソッドの際は`set_location_post`を必ず実行するようにした







