# 参考
- https://qiita.com/kazukimatsumoto/items/14bdff681ec5ddac26d1

## 必要そうなこと
- `location_post`テーブルに`user_id`追加
- モデル修正
  - `User.rb`...`has_many :location_posts`
  - `LocationPost.rb`...`belongs_to :user`
- コントローラー修正
  - 投稿作成の際等に使うストロングパラメータに`user_id`を含める
    - フロント、バックエンドともに修正必要
   
# 実装

## マイグレーション失敗→カラム削除
```ruby
class AddUserIdToLocationPost < ActiveRecord::Migration[7.0]

  def up
    remove_column :location_posts, :user_id
    remove_column :location_posts, :user_id_id
  end
end
```
```bash
$ bin/rails db:migrate RAILS_ENV=development
or
$ rails db:migrate
```

## 改めてカラム追加
```ruby
class AddUserIdIdToLocationPost < ActiveRecord::Migration[7.0]
  def change
    add_reference :location_posts, :user, foreign_key: true
  end
end
```
```bash
$ rails db:migrate
```

## モデル修正
`user.rb`
```ruby
# frozen_string_literal: true

class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :confirmable, :lockable, :timeoutable, :trackable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :validatable
  include DeviseTokenAuth::Concerns::User
  # 追加
  has_many :location_posts
end
```

`location_post.rb`
```ruby
class LocationPost < ApplicationRecord
    validates :title, presence: true
    # 追加
    belongs_to :user
end
```



